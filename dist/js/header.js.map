{"version":3,"sources":["webpack:///./src/js/header.js"],"names":["document","getElementById","navbar","template","innerHTML","queueTools","login","data","index","staff","list","init","localData","pullLocal","addCustom","refresh","contact","getCustomData","custom","uid","name","Date","getTime","cid","parseInt","Math","random","getTimeData","nz","n","time","timestr","getHours","getMinutes","html","getHeaderHtml","makeCustom","_self","forEach","e","i","cur","tmp","replace","aaa","queue","switchCustom","pushLocal","findCart","push","length","removeCustom","splice","cartid","alert","setCustom","querySelector","classList","remove","add","exit","res","confirm","delLocal","location","href","window"],"mappings":"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","file":"header.js","sourcesContent":["//var  util= require('util/util.js');\r\nimport util from 'util/util.js';\r\n\r\n!(function (){\r\n\r\n\tif(!document.getElementById(\"header-nav\")){return false;}\r\n    var navbar=document.getElementById(\"header-nav\");\r\n\tvar template=navbar.innerHTML;\r\n\r\n\r\n\tvar queueTools={\r\n\t\tlogin:false,\r\n\t\ttemplate: template,\r\n\t\tdata:{\r\n\t\t\tindex:0,\r\n\t\t\tstaff:\"里可行\",\r\n\t\t\tlist:[\r\n\t \t\t\t\r\n\t \t\t]\r\n\t\t},\r\n\t\tinit:function(){\r\n\t\t\t\r\n\t\t\tvar localData=util.pullLocal(\"queue\");\r\n\t\t\tif(localData){this.data=localData;}\r\n\r\n\t\t\tif(this.data.list==0){\r\n\t\t\t\tthis.addCustom();\r\n\t\t\t}\r\n\r\n           this.refresh();\r\n\t\t\tthis.contact();\r\n\t\t},\r\n        //获得用户资料\r\n\t\tgetCustomData:function(){\r\n\t\t\tvar custom={}\r\n            custom.uid=\"1001\";\r\n\t\t\tcustom.name=\"custom_\"+new Date().getTime();\r\n\t\t\tcustom.cid=parseInt(Math.random()*1000);\r\n\t\t\treturn custom;\r\n\t\t},\r\n        //获得时间信息\r\n\t\tgetTimeData:function(){\r\n\t\t\tfunction nz(n){\r\n\t\t\t\t\tif(n<10){\r\n\t\t\t\t\t\tn=\"0\"+n;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tn=n+\"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn n;\r\n\t\t\t}\r\n\r\n\t\t\tvar time=new Date();\r\n\t\t\tvar timestr=nz(time.getHours())+\":\"+nz(time.getMinutes());\r\n\r\n\t\t\treturn timestr;\r\n\t\t},\r\n\t\trefresh:function(){\r\n\t\t\t\r\n\t\t\tvar html=this.getHeaderHtml();\r\n\r\n\t\t\tnavbar.innerHTML=html;\r\n\r\n\r\n\t\t},\r\n\t\tmakeCustom:function(data){\r\n\t\t\tvar _self=this;\r\n\t\t\tvar html=\"\";\r\n\t\t\tvar template='<li><a class=\"custom {cur}\" onclick=\"queueTools.switchCustom({index})\"><span class=\"num\">{index}</span><span class=\"time\">{time}</span></a></li>';\r\n\t\t\tdata.forEach(function(e,i){\t\r\n\t\t\t\t\tvar cur=\"cur\";\r\n\t\t\t\t\ti==_self.data.index?cur = cur:cur=\"\";\r\n\t\t\t\t\tvar tmp = template.replace(/{index}/g,(i+1))\r\n\t\t\t\t\t\t\t  \t\t  .replace(/{cur}/g,cur)\r\n\t\t\t\t\t\t\t  \t\t  .replace(/{time}/g,e.time);\t \r\n\t\t\t    \thtml+=tmp;\r\n\t\t\t})  \r\n\t\t\treturn html;\r\n\t\t},\r\n\t\t//获得最新的html\r\n\t\tgetHeaderHtml:function(){\r\n\t\t\tvar staff=this.data.staff;\r\n\t\t\tvar aaa=this.data.list;\r\n\t\t\tvar queue=this.makeCustom(aaa);\r\n\t\t\tvar tmp = this.template.replace(/{staff}/g, staff)\r\n\t\t\t.replace(/{queue}/g, queue);\r\n\t\t\treturn tmp;\r\n\t\t},\r\n\t\t//切换用户\r\n\t\tswitchCustom:function(index){\r\n\t\t\tthis.data.index=index-1;\r\n\t\t\tthis.refresh();\r\n            util.pushLocal(\"queue\",this.data);\r\n\r\n            //查询购物车\r\n\t\t\tthis.findCart(this.data.list[index-1].custom.name,this.data.list[index-1].custom.cid)\r\n\r\n\t\t},\r\n\t\t//新增用户\r\n\t\taddCustom:function(){\r\n\t\t\tvar queue={};\r\n\t\t\t//记录客户当前时间\r\n\t\t\tqueue.time=this.getTimeData();\r\n\t\t\t//记录客户名会员\r\n\t\t\tqueue.custom=this.getCustomData()\r\n\t\t\t//\r\n\t\t\tthis.data.list.push(queue);\r\n\t\t\tthis.data.index=this.data.list.length-1;\r\n\r\n\t\t\tthis.refresh();\r\n            util.pushLocal(\"queue\",this.data);\r\n\t\t\r\n\t\t},\r\n\r\n\t\t//删除用户\r\n\t\tremoveCustom:function(){\r\n\t\t\tvar index=this.data.index;\r\n\t\t\tthis.data.list.splice(index,1);\r\n\t\t\tthis.refresh();\r\n            util.pushLocal(\"queue\",this.data);\r\n\r\n\t\t},\r\n\t\t//查询购物记录\r\n\t\tfindCart:function(name,cartid){\r\n\t\t\talert(\"用户名:\"+name+\",购物车id:\"+cartid)\r\n\r\n\t\t},\r\n        //设置用户信息\r\n        setCustom:function(custom){\r\n            if(this.data.list.length==0){return ;}\r\n            var index =this.data.index;\r\n\r\n            this.data.list[index].custom=custom;\r\n            util.pushLocal(\"queue\",this.data);\r\n\r\n        },\r\n        //连接设备\r\n        contact:function(){\r\n            document.querySelector('.contact-btn').classList.remove('success','error');\r\n          if(2>1) {\r\n              document.querySelector('.contact-btn').classList.add('success');\r\n\r\n          }else{\r\n              document.querySelector('.contact-btn').classList.add('error');\r\n\t\t  }\r\n\r\n        },\r\n        //连接设备\r\n        exit:function(){\r\n        \tvar res=confirm(\"确定退出吗? \");\r\n        \tif(res) {\r\n                util.delLocal('queue');\r\n                location.href=\"./login.html\";\r\n            }\r\n\r\n        },\r\n        //设置用户信息\r\n        setCustom:function(custom){\r\n            if(this.data.list.length==0){return ;}\r\n            var index =this.data.index;\r\n\r\n            this.data.list[index].custom=custom;\r\n            util.pushLocal(\"queue\",this.data);\r\n\r\n        },\r\n\r\n\t}\r\n\t   \r\n\r\n\tqueueTools.init();\r\n\r\n\r\n\r\n\twindow.queueTools=queueTools;\r\n\r\n})();\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/header.js"],"sourceRoot":""}