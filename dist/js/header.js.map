{"version":3,"sources":["webpack:///./src/js/util/util.js?cee8","webpack:///./src/js/header.js"],"names":["util","pushLocal","key","value","str","JSON","stringify","localStorage","setItem","pullLocal","getItem","obj","parse","delLocal","removeItem","initLocal","clear","randomNum","n","m","parseInt","Math","random","getUrlHash","reg","RegExp","name","r","window","location","hash","substr","match","decodeURI","getSelectDate","date","Date","getFullYear","getMonth","getDate","getItemPrice","document","getElementById","navbar","template","innerHTML","queueTools","login","data","index","staff","list","init","localData","addCustom","refresh","contact","getCustomData","custom","uid","getTime","cid","getTimeData","nz","time","timestr","getHours","getMinutes","html","getHeaderHtml","makeCustom","_self","forEach","e","i","cur","tmp","replace","aaa","queue","switchCustom","findCart","push","length","removeCustom","splice","cartid","alert","setCustom","querySelector","classList","remove","add","exit","res","confirm","href"],"mappings":"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","file":"header.js","sourcesContent":["    //es6 简单导入\r\n    //http://blog.csdn.net/lihongxun945/article/details/49031383\r\n    var util={\r\n\r\n        pushLocal:function (key,value){\r\n            var str = JSON.stringify(value); // 将对象转换为字符串\r\n            localStorage.setItem(key,str);\r\n        },\r\n\r\n        pullLocal:function (key){\r\n           var str=localStorage.getItem(key); //将字符串转换为对象\r\n           var obj =JSON.parse(str);\r\n           return obj;\r\n         },\r\n\r\n        delLocal:function (key){\r\n           var str=localStorage.removeItem(key);\r\n           return str;\r\n        },\r\n\r\n        initLocal:function(key){\r\n               localStorage.clear();\r\n\r\n        },\r\n        /**\r\n         * 获取随机数\r\n         */\r\n        randomNum:function(n,m){\r\n            return parseInt(Math.random() * (m + 1 - n)) + n;\r\n        },\r\n        /**\r\n         * [获取分页id]\r\n         * @return {[type]} [description]\r\n         */\r\n        getUrlHash:function(){\r\n            var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\");\r\n            var r = window.location.hash.substr(1).match(reg);\r\n            if (r != null) return decodeURI(r[2]); return null;\r\n        },\r\n\r\n        /**\r\n         * [获取选择日期]\r\n         * @return {[type]} [2016-11-11]\r\n         */\r\n        getSelectDate:function(){\r\n            var date=new Date();\r\n            return date.getFullYear()+'-'+(date.getMonth()+1)+'-'+date.getDate();\r\n\r\n        },\r\n\r\n        /**\r\n         * [获取单件价格 ]\r\n         * @return {[type]} [数量*单价]\r\n         */\r\n        getItemPrice:function(){\r\n            var date=new Date();\r\n            return date.getFullYear()+'-'+(date.getMonth()+1)+'-'+date.getDate();\r\n        }\r\n\r\n};\r\n\r\n\r\n//  导出\r\n    export default util;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/util/util.js","//var  util= require('util/util.js');\r\nimport util from 'util/util.js';\r\n\r\n!(function (){\r\n\r\n\tif(!document.getElementById(\"header-nav\")){return false;}\r\n    var navbar=document.getElementById(\"header-nav\");\r\n\tvar template=navbar.innerHTML;\r\n\r\n\r\n\tvar queueTools={\r\n\t\tlogin:false,\r\n\t\ttemplate: template,\r\n\t\tdata:{\r\n\t\t\tindex:0,\r\n\t\t\tstaff:\"里可行\",\r\n\t\t\tlist:[\r\n\t \t\t\t\r\n\t \t\t]\r\n\t\t},\r\n\t\tinit:function(){\r\n\t\t\t\r\n\t\t\tvar localData=util.pullLocal(\"queue\");\r\n\t\t\tif(localData){this.data=localData;}\r\n\r\n\t\t\tif(this.data.list==0){\r\n\t\t\t\tthis.addCustom();\r\n\t\t\t}\r\n\r\n           this.refresh();\r\n\t\t\tthis.contact();\r\n\t\t},\r\n        //获得用户资料\r\n\t\tgetCustomData:function(){\r\n\t\t\tvar custom={}\r\n            custom.uid=\"1001\";\r\n\t\t\tcustom.name=\"custom_\"+new Date().getTime();\r\n\t\t\tcustom.cid=parseInt(Math.random()*1000);\r\n\t\t\treturn custom;\r\n\t\t},\r\n        //获得时间信息\r\n\t\tgetTimeData:function(){\r\n\t\t\tfunction nz(n){\r\n\t\t\t\t\tif(n<10){\r\n\t\t\t\t\t\tn=\"0\"+n;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tn=n+\"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn n;\r\n\t\t\t}\r\n\r\n\t\t\tvar time=new Date();\r\n\t\t\tvar timestr=nz(time.getHours())+\":\"+nz(time.getMinutes());\r\n\r\n\t\t\treturn timestr;\r\n\t\t},\r\n\t\trefresh:function(){\r\n\t\t\t\r\n\t\t\tvar html=this.getHeaderHtml();\r\n\r\n\t\t\tnavbar.innerHTML=html;\r\n\r\n\r\n\t\t},\r\n\t\tmakeCustom:function(data){\r\n\t\t\tvar _self=this;\r\n\t\t\tvar html=\"\";\r\n\t\t\tvar template='<li><a class=\"custom {cur}\" onclick=\"queueTools.switchCustom({index})\"><span class=\"num\">{index}</span><span class=\"time\">{time}</span></a></li>';\r\n\t\t\tdata.forEach(function(e,i){\t\r\n\t\t\t\t\tvar cur=\"cur\";\r\n\t\t\t\t\ti==_self.data.index?cur = cur:cur=\"\";\r\n\t\t\t\t\tvar tmp = template.replace(/{index}/g,(i+1))\r\n\t\t\t\t\t\t\t  \t\t  .replace(/{cur}/g,cur)\r\n\t\t\t\t\t\t\t  \t\t  .replace(/{time}/g,e.time);\t \r\n\t\t\t    \thtml+=tmp;\r\n\t\t\t})  \r\n\t\t\treturn html;\r\n\t\t},\r\n\t\t//获得最新的html\r\n\t\tgetHeaderHtml:function(){\r\n\t\t\tvar staff=this.data.staff;\r\n\t\t\tvar aaa=this.data.list;\r\n\t\t\tvar queue=this.makeCustom(aaa);\r\n\t\t\tvar tmp = this.template.replace(/{staff}/g, staff)\r\n\t\t\t.replace(/{queue}/g, queue);\r\n\t\t\treturn tmp;\r\n\t\t},\r\n\t\t//切换用户\r\n\t\tswitchCustom:function(index){\r\n\t\t\tthis.data.index=index-1;\r\n\t\t\tthis.refresh();\r\n            util.pushLocal(\"queue\",this.data);\r\n\r\n            //查询购物车\r\n\t\t\tthis.findCart(this.data.list[index-1].custom.name,this.data.list[index-1].custom.cid)\r\n\r\n\t\t},\r\n\t\t//新增用户\r\n\t\taddCustom:function(){\r\n\t\t\tvar queue={};\r\n\t\t\t//记录客户当前时间\r\n\t\t\tqueue.time=this.getTimeData();\r\n\t\t\t//记录客户名会员\r\n\t\t\tqueue.custom=this.getCustomData()\r\n\t\t\t//\r\n\t\t\tthis.data.list.push(queue);\r\n\t\t\tthis.data.index=this.data.list.length-1;\r\n\r\n\t\t\tthis.refresh();\r\n            util.pushLocal(\"queue\",this.data);\r\n\t\t\r\n\t\t},\r\n\r\n\t\t//删除用户\r\n\t\tremoveCustom:function(){\r\n\t\t\tvar index=this.data.index;\r\n\t\t\tthis.data.list.splice(index,1);\r\n\t\t\tthis.refresh();\r\n            util.pushLocal(\"queue\",this.data);\r\n\r\n\t\t},\r\n\t\t//查询购物记录\r\n\t\tfindCart:function(name,cartid){\r\n\t\t\talert(\"用户名:\"+name+\",购物车id:\"+cartid)\r\n\r\n\t\t},\r\n        //设置用户信息\r\n        setCustom:function(custom){\r\n            if(this.data.list.length==0){return ;}\r\n            var index =this.data.index;\r\n\r\n            this.data.list[index].custom=custom;\r\n            util.pushLocal(\"queue\",this.data);\r\n\r\n        },\r\n        //连接设备\r\n        contact:function(){\r\n            document.querySelector('.contact-btn').classList.remove('success','error');\r\n          if(2>1) {\r\n              document.querySelector('.contact-btn').classList.add('success');\r\n\r\n          }else{\r\n              document.querySelector('.contact-btn').classList.add('error');\r\n\t\t  }\r\n\r\n        },\r\n        //连接设备\r\n        exit:function(){\r\n        \tvar res=confirm(\"确定退出吗? \");\r\n        \tif(res) {\r\n                util.delLocal('queue');\r\n                location.href=\"./login.html\";\r\n            }\r\n\r\n        },\r\n        //设置用户信息\r\n        setCustom:function(custom){\r\n            if(this.data.list.length==0){return ;}\r\n            var index =this.data.index;\r\n\r\n            this.data.list[index].custom=custom;\r\n            util.pushLocal(\"queue\",this.data);\r\n\r\n        },\r\n\r\n\t}\r\n\t   \r\n\r\n\tqueueTools.init();\r\n\r\n\r\n\r\n\twindow.queueTools=queueTools;\r\n\r\n})();\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/header.js"],"sourceRoot":""}