{"version":3,"sources":["webpack:///./src/js/header.js"],"names":["templates","queueTools","login","template","data","index","staff","list","init","localData","pullLocal","getSystemCustom","custom","name","Date","getTime","cid","getSystemTime","nz","n","time","timestr","getHours","getMinutes","refresh","html","getHeaderHtml","document","getElementById","$","append","innerHTML","makeCustom","_self","forEach","e","i","cur","tmp","replace","queue","switchCustom","pushLocal","addCustom","push","length","setCustom","alert","removeCustom","splice","window"],"mappings":"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","file":"header.js","sourcesContent":["//var  util= require('util/util.js');\r\nimport util from 'util/util.js';\r\n\r\n!(function (){\r\n\tvar templates=''+\r\n\t\t\t'<div class=\"navbar navbar-inverse navbar-fixed-top\" id=\"header\">'+\r\n\t\t\t\t '<a class=\"navbar-brand\"><img src=\"/images/logo.jpg\" alt=\"Brand\"></a>'+\r\n\t\t\t\t'<div class=\"container\">'+\r\n\t\t\t\t\t'<div class=\"staff\">{staff}</div>'+\r\n\t\t\t       ' <div class=\"navbar-header\">'+\r\n\t\t\t          '<button class=\"navbar-toggle collapsed\" type=\"button\" data-toggle=\"collapse\" data-target=\".navbar-collapse\">'+\r\n\t\t\t            '<span class=\"sr-only\">Toggle navigation</span>'+\r\n\t\t\t            '<span class=\"icon-bar\"></span>'+\r\n\t\t\t            '<span class=\"icon-bar\"></span>'+\r\n\t\t\t            '<span class=\"icon-bar\"></span>'+\r\n\t\t\t          '</button>'+\r\n\t\t\t        '</div>'+\r\n\t\t\t        '<div class=\"navbar-collapse collapse\" role=\"navigation\">'+\r\n\t\t\t          '<ul class=\"nav navbar-nav\">'+\r\n\t\t\t          \t'{custom}'+\r\n\t\t\t            '<li><a class=\"custom-add\" onclick=\"queueTools.addCustom();\">+</a></li>'+\r\n\t\t\t            '<li><a class=\"custom-remove\" onclick=\"queueTools.removeCustom();\">-</a></li>'+\r\n\t\t\t          '</ul>'+\r\n\t\t\t       ' </div>'+\r\n\t\t\t \t'</div>'+\r\n   \t   \t\t'</div>';\r\n\t\t\r\n\r\n\tvar queueTools={\r\n\t\tlogin:false,\r\n\t\ttemplate: templates,\r\n\t\tdata:{\r\n\t\t\tindex:0,\r\n\t\t\tstaff:\"收营员XXX\",\r\n\t\t\tlist:[\r\n\t \t\t\t\r\n\t \t\t]\r\n\t\t},\r\n\t\tinit:function(){\r\n\t\t\t\r\n\t\t\tvar localData=util.pullLocal(\"queue\");\r\n\t\t\tif(localData){this.data=localData;}\t\t\t\r\n\t\t},\r\n\t\tgetSystemCustom:function(){\r\n\t\t\t//默认匿名用户\r\n\t\t\tvar custom={}\r\n\t\t\tcustom.name=\"custom_\"+new Date().getTime();\r\n\t\t\tcustom.cid=null;\r\n\r\n\t\t\t\r\n\r\n\t\t\treturn custom;\r\n\t\t},\r\n\t\tgetSystemTime:function(){\r\n\t\t\tfunction nz(n){\r\n\t\t\t\t\tif(n<10){\r\n\t\t\t\t\t\tn=\"0\"+n;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tn=n+\"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn n;\r\n\t\t\t}\r\n\r\n\t\t\tvar time=new Date();\r\n\t\t\tvar timestr=nz(time.getHours())+\":\"+nz(time.getMinutes());\r\n\t\t\treturn timestr;\r\n\t\t},\r\n\t\trefresh:function(){\r\n\t\t\t\r\n\t\t\tvar html=this.getHeaderHtml();\r\n\t\t\tif(!document.getElementById(\"header\")){\r\n\t\t\t\t$(\"body\").append(html);\t\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tdocument.getElementById(\"header\").innerHTML=html;\t\t\t\r\n\t\t\t}\r\n   \t \t\t//pushLocal(\"miku\",this.data);\r\n\t\t},\r\n\t\tmakeCustom:function(data){\r\n\t\t\tvar _self=this;\r\n\t\t\tvar html=\"\";\r\n\t\t\tvar template='<li><a class=\"custom {cur}\" onclick=\"queueTools.switchCustom({index})\"><span class=\"num\">{index}</span><span class=\"time\">{time}</span></a></li>';\r\n\t\t\tdata.forEach(function(e,i){\t\r\n\t\t\t\t\tvar cur=\"cur\";\r\n\t\t\t\t\ti==_self.data.index?cur = cur:cur=\"\";\r\n\t\t\t\t\tvar tmp = template.replace(/{index}/g,(i+1))\r\n\t\t\t\t\t\t\t  \t\t  .replace(/{cur}/g,cur)\r\n\t\t\t\t\t\t\t  \t\t  .replace(/{time}/g,e.time);\t \r\n\t\t\t    \thtml+=tmp;\r\n\t\t\t})  \r\n\t\t\treturn html;\r\n\t\t},\r\n\t\tgetHeaderHtml:function(){\r\n\t\t\tvar staff=this.data.staff;\r\n\t\t\tvar queue=this.data.list;\r\n\t\t\tvar custom=this.makeCustom(queue);\r\n\t\t\tvar tmp = this.template.replace(/{staff}/g, staff)\r\n\t\t\t.replace(/{custom}/g, custom);\r\n\t\t\treturn tmp;\r\n\t\t},\r\n\t\tswitchCustom:function(index){\r\n\t\t\tthis.data.index=index-1;\r\n\t\t\tthis.refresh();\r\n            util.pushLocal(\"queue\",this.data);\r\n\r\n\t\t\t//alert(queueTools.data.list[queueTools.data.index].custom.name)\r\n\t\t},\r\n\t\taddCustom:function(custom){\r\n\t\t\tvar queue={};\r\n\t\t\t//记录客户当前时间\r\n\t\t\tqueue.time=this.getSystemTime();\r\n\t\t\t//记录客户名会员\r\n\t\t\tqueue.custom=this.getSystemCustom()\r\n\t\t\t\r\n\t\t\tthis.data.list.push(queue);\r\n\t\t\tthis.data.index=this.data.list.length-1;\r\n\r\n\t\t\tthis.refresh();\r\n            util.pushLocal(\"queue\",this.data);\r\n\t\t\r\n\t\t},\r\n\t\tsetCustom:function(custom){\r\n\t\t\tif(this.data.list.length==0){return ;}\r\n\t \t\tvar index =this.data.index;\r\n\t \t\talert(index);\r\n\t \t\tthis.data.list[index].custom=custom;\r\n            util.pushLocal(\"queue\",this.data);\r\n\t\t\r\n\t\t},\r\n\t\tremoveCustom:function(){\r\n\t\t\tvar index=this.data.index;\r\n\t\t\tthis.data.list.splice(index,1);\r\n\t\t\tthis.refresh();\r\n            util.pushLocal(\"queue\",this.data);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\t   \r\n//\r\n\tqueueTools.init();\r\n\tqueueTools.refresh();\r\n\r\n\twindow.queueTools=queueTools;\r\n\r\n})();\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/header.js"],"sourceRoot":""}